parameters:
  terraformVarFile: ''
  environment: ''

steps:
  - bash: |
      if [ $terraformVarFile == "" ]; then
        TERRAFORM_VAR_FILE=$(System.DefaultWorkingDirectory)/$(buildRepoSuffix)/environments/$environment/$(tfVarsName).tfvars
      else
        TERRAFORM_VAR_FILE=$terraformVarFile
      fi
      echo "##vso[task.setvariable variable=tfVarFile]$TERRAFORM_VAR_FILE"
    displayName: Set terraform var-file env variable
    env:
      terraformVarFile: ${{ parameters.terraformVarFile }}
      environment: ${{ parameters.environment }}
