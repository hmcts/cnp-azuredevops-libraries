ci:
  owner:
  - type: envsubst
    value: hmcts
  repo:
  - type: envsubst
    value: sds-jenkins-infrastructure
  - type: envsubst
    value: azure-platform-terraform
terraform:
  plan:
    template: |
      {{if .HasDestroy}}
      ## :warning: WARNING: Resource Deletion will happen :warning:
      This plan contains **resource deletion**. Please check the plan result very carefully!
      <a href="https://dev.azure.com//hmcts/CNP/_build/results?buildId=$(Build.BuildId)&view=charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-plan">See plan in Azure DevOps</a>
      {{else}}
      ## Plan Result {{.Vars.target}}
      {{if .Result}}
      <pre><code>{{ .Result }}
      </pre></code>
      {{end}}
      <a href="https://dev.azure.com//hmcts/CNP/_build/results?buildId=$(Build.BuildId)&view=charleszipp.azure-pipelines-tasks-terraform.azure-pipelines-tasks-terraform-plan">See plan in Azure DevOps</a>
      {{end}}
      @appInfo.BuildNumber